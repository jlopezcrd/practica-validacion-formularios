$(document).ready(function(){$("#provincia").load("http://jorgelopez.infenlaces.com/validacion/consultar_provincias.php"),$("#complexify #password").complexify({},function(a,b){var c=$("#complexify #complexity-bar");c.toggleClass("progress-bar-success",a),c.toggleClass("progress-bar-danger",!a),c.css({width:b+"%"}),$("#complexify #complexity").text(Math.round(b)+"%")}),$("#apellidos").keyup(function(){$("#nombre_empresa").val(""),$("#nombre_empresa").val($("#nombre").val()+" "+$("#apellidos").val())}),$("#demandante-empresa").click(function(){$("#demandante-empresa").is(":checked")&&($("#empresa").text("Empresa"),$("#nombre_empresa").prop("disabled",!1),$("#nombre_empresa").prop("placeholder","Empresa"),$("#nif-label").text("CIF:"),$("#nif").prop("placeholder","Cif"),$("#nif").prop("name","cif"),$("#nif").prop("id","cif"))}),$("#demandante-particular").click(function(){$("#demandante-particular").is(":checked")&&($("#empresa").text("Nombre:"),$("#nombre_empresa").val($("#nombre").val()+" "+$("#apellidos").val()),$("#nombre_empresa").prop("disabled",!0),$("#nif-label").text("NIF:"),$("#cif").prop("placeholder","Nif"),$("#cif").prop("name","nif"),$("#cif").attr("id","nif"))}),$("#cp").change(function(){$("#cp").val().length>5&&$("#cp").val(""),4==$("#cp").val().length&&$("#cp").val("0"+$("#cp").val()),3==$("#cp").val().length&&$("#cp").val("00"+$("#cp").val()),2==$("#cp").val().length&&$("#cp").val("000"+$("#cp").val()),1==$("#cp").val().length&&$("#cp").val("0000"+$("#cp").val())}),$("#email").change(function(){$("#usuario").val($("#email").val()),$("#email").val().length<=4&&alert("EL usuario debe contener 4 caracteres minimo")}),$("#repassword").change(function(){$("#repassword").val()!=$("#password").val()&&alert("El password no coincide")}),$("#cp").keyup(function(){var a=parseInt($("#cp").val().substring(0,2));$("#provincia option[value="+a+"]").attr("selected",!0)}),$("#miform").validate({errorElement:"span",errorElementClass:"has-error has-feedback",errorClass:"has-error has-feedback",rules:{nombre:"required",apellidos:"required",telefono:{required:!0,digits:!0,minlength:9},email:{required:!0,email:!0,remote:{url:"http://jorgelopez.infenlaces.com/validacion/consultar_usuario.php",type:"get",data:{email:function(){return $("#email").val()}}}},remail:{required:!0,email:!0},nif:{required:!0,remote:{url:"http://jorgelopez.infenlaces.com/validacion/consultar_nif.php",type:"get",data:{nif:function(){return $("#nif").val()}}}},cif:{required:!0,cifES:!0},nombre_empresa:"required",direccion:"required",cp:{required:!0,maxlength:5},localidad:"required",provincia:"required",pais:"required",codigo_iban:{required:!0,iban:!0},usuario:"required",password:{required:!0,minlength:5},repassword:{required:!0,minlength:5}},messages:{nombre:"El campo nombre es requerido",apellidos:"El campo apellidos es requerido",telefono:{required:"El telefono es necesario",minlength:"El numero debe tener 9 caracteres como minimo"},email:{required:"El campo email es requerido",email:"Debe ser tipo email",remote:"Ese email ya esta registrado"},remail:{required:"El campo repetir email es requerido",email:"Debe ser tipo email"},nif:"El nif introducido esta usado",cif:"El campo cif es requerido",nombre_empresa:"El campo nombre de empresa es requerido",direccion:"El campo direccion es requerido",cp:"El campo cp es requerido",localidad:"El campo localidad es requerido",provincia:"El campo provincia es requerido",pais:"El campo pais es requerido",codigo_iban:"El campo codigo_iban es requerido",usuario:"El campo usuario es requerido",password:{required:"El campo password es requerido",minlength:"La longitud minima debe ser 5"},repassword:{required:"El campo repetir password es requerido",minlength:"La longitud minima debe ser 5"}},submitHandler:function(a){var b;$("#optionsRadios1").is(":checked")&&(b="mensual será de 50€"),$("#optionsRadios2").is(":checked")&&(b="trimestral será de 140€"),$("#optionsRadios3").is(":checked")&&(b="anual será de 550€");var c=confirm("Su cuota es de:  "+b+" ¿Esta de acuerdo?");1==c?(alert("Alta correcta!"),a.submit()):alert("No se ha procedido al alta")}}),$.validator.addMethod("cifES",function(a){"use strict";var b,c,d,e,f,g,h=[];if(a=a.toUpperCase(),!a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(d=0;9>d;d++)h[d]=parseInt(a.charAt(d),10);for(c=h[2]+h[4]+h[6],e=1;8>e;e+=2)f=(2*h[e]).toString(),g=f.charAt(1),c+=parseInt(f.charAt(0),10)+(""===g?0:parseInt(g,10));return/^[ABCDEFGHJNPQRSUVW]{1}/.test(a)?(c+="",b=10-parseInt(c.charAt(c.length-1),10),a+=b,h[8].toString()===String.fromCharCode(64+b)||h[8].toString()===a.charAt(a.length-1)):!1},"Please specify a valid CIF number."),$.validator.addMethod("iban",function(a,b){if(this.optional(b))return!0;var c,d,e,f,g,h,i,j,k,l=a.replace(/ /g,"").toUpperCase(),m="",n=!0,o="",p="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(l))return!1;if(c=l.substring(0,2),h={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},g=h[c],"undefined"!=typeof g&&(i=new RegExp("^[A-Z]{2}\\d{2}"+g+"$",""),!i.test(l)))return!1;for(d=l.substring(4,l.length)+l.substring(0,4),j=0;j<d.length;j++)e=d.charAt(j),"0"!==e&&(n=!1),n||(m+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e));for(k=0;k<m.length;k++)f=m.charAt(k),p=""+o+f,o=p%97;return 1===o},"Please specify a valid IBAN")});